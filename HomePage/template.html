<!DOCTYPE html>
<html lang="{{lang}}" class="scroll-smooth">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{page_title}}</title>
    <meta name="description" content="{{meta_description}}">
    <meta name="keywords" content="{{meta_keywords}}">

    <!-- Canonical & Hreflang -->
    <link rel="canonical" href="{{canonical_url}}">
    {{hreflang_tags}}

    <!-- Open Graph -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="{{og_title}}">
    <meta property="og:description" content="{{og_description}}">
    <meta property="og:url" content="{{canonical_url}}">
    <meta property="og:locale" content="{{locale}}">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="{{og_title}}">
    <meta name="twitter:description" content="{{og_description}}">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Markdown Parser -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: ['selector', '[data-theme="dark"]'],
            theme: {
                extend: {
                    fontFamily: { sans: ['Inter', 'sans-serif'] },
                    colors: {
                        apple: { 50: '#f5f5f7', 100: '#e8e8ed', 200: '#d2d2d7', 800: '#2c2c2e', 900: '#1c1c1e' },
                        accent: { DEFAULT: '#007aff', hover: '#0077ed', dark: '#0a84ff' }
                    },
                    boxShadow: {
                        'apple-sm': '0 2px 8px rgba(0,0,0,0.04)',
                        'apple-md': '0 8px 24px rgba(0,0,0,0.08)',
                        'apple-sm-dark': '0 2px 8px rgba(0,0,0,0.2)',
                        'apple-md-dark': '0 8px 24px rgba(0,0,0,0.4)',
                    }
                }
            }
        }
    </script>

    <style>
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }

        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .fade-up {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.6s ease, transform 0.6s ease;
        }

        .fade-up.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .markdown-body h1 {
            font-size: 1.25rem;
            font-weight: 700;
            color: #111827;
            margin-top: 1.25rem;
            margin-bottom: 0.75rem;
        }

        .markdown-body h2 {
            font-size: 1.125rem;
            font-weight: 600;
            color: #111827;
            margin-top: 1rem;
            margin-bottom: 0.5rem;
        }

        .markdown-body h3 {
            font-size: 1rem;
            font-weight: 600;
            color: #111827;
            margin-top: 0.75rem;
            margin-bottom: 0.5rem;
        }

        .markdown-body p {
            margin-bottom: 0.75rem;
            line-height: 1.625;
        }

        .markdown-body ul {
            list-style-type: disc;
            padding-left: 1.25rem;
            margin-bottom: 1rem;
        }

        .markdown-body ol {
            list-style-type: decimal;
            padding-left: 1.25rem;
            margin-bottom: 1rem;
        }

        .markdown-body li {
            line-height: 1.625;
            margin-bottom: 0.25rem;
        }

        .markdown-body a {
            color: #007aff;
        }

        .markdown-body a:hover {
            text-decoration: underline;
        }

        .markdown-body code {
            padding: 0.125rem 0.375rem;
            background-color: #f3f4f6;
            border-radius: 0.25rem;
            font-size: 0.875rem;
            font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
            color: #db2777;
        }

        .markdown-body pre {
            padding: 1rem;
            background-color: #f3f4f6;
            border-radius: 0.5rem;
            overflow-x: auto;
            margin-bottom: 1rem;
        }

        .markdown-body pre code {
            padding: 0;
            background-color: transparent;
            color: #1f2937;
        }

        .markdown-body blockquote {
            padding-left: 1rem;
            border-left: 4px solid #d1d5db;
            font-style: italic;
            color: #4b5563;
            margin: 1rem 0;
        }

        .markdown-body hr {
            margin: 1.5rem 0;
            border-color: #e5e7eb;
        }

        .markdown-body table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 1rem;
        }

        .markdown-body th,
        .markdown-body td {
            border: 1px solid #e5e7eb;
            padding: 0.5rem 0.75rem;
            text-align: left;
        }

        .markdown-body th {
            background-color: #f9fafb;
            font-weight: 600;
        }

        .markdown-body img {
            max-width: 100%;
            height: auto;
            border-radius: 0.5rem;
            margin: 0.5rem 0;
        }

        [data-theme="dark"] .markdown-body h1,
        [data-theme="dark"] .markdown-body h2,
        [data-theme="dark"] .markdown-body h3 {
            color: #f3f4f6;
        }

        [data-theme="dark"] .markdown-body a {
            color: #0a84ff;
        }

        [data-theme="dark"] .markdown-body code {
            background-color: #1f2937;
            color: #f472b6;
        }

        [data-theme="dark"] .markdown-body pre {
            background-color: #1f2937;
        }

        [data-theme="dark"] .markdown-body pre code {
            color: #e5e7eb;
        }

        [data-theme="dark"] .markdown-body blockquote {
            border-left-color: #4b5563;
            color: #9ca3af;
        }

        [data-theme="dark"] .markdown-body hr {
            border-color: #374151;
        }

        [data-theme="dark"] .markdown-body th,
        [data-theme="dark"] .markdown-body td {
            border-color: #374151;
        }

        [data-theme="dark"] .markdown-body th {
            background-color: #1f2937;
        }

        .hero-glow::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 600px;
            height: 600px;
            background: radial-gradient(circle, rgba(0, 122, 255, 0.15) 0%, rgba(0, 0, 0, 0) 70%);
            border-radius: 50%;
            z-index: -1;
            pointer-events: none;
        }
    </style>
</head>

<body
    class="font-sans antialiased bg-white dark:bg-black text-gray-900 dark:text-gray-100 transition-colors duration-300">

    <!-- Navbar -->
    <nav
        class="fixed top-0 left-0 right-0 h-16 bg-white/80 dark:bg-[#1c1c1e]/80 backdrop-blur-md z-50 border-b border-gray-200 dark:border-gray-800 transition-colors duration-300">
        <div class="max-w-7xl mx-auto px-6 h-full flex items-center justify-between">
            <a href="#" class="flex items-center gap-3 font-bold text-xl hover:opacity-80 transition-opacity">
                <img src="./img/logo.png" alt="Logo" class="w-8 h-8">
                <span>OpenTrace</span>
            </a>

            <div class="flex items-center gap-6">
                <div class="hidden md:flex items-center gap-6">
                    <a href="#preview"
                        class="text-sm font-medium text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors">{{nav_preview}}</a>
                    <a href="#features"
                        class="text-sm font-medium text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors">{{nav_features}}</a>
                    <a href="#downloads"
                        class="text-sm font-medium text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors">{{nav_download}}</a>
                    <a href="https://github.com/Archeb/opentrace" target="_blank"
                        class="text-sm font-medium text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors">
                        <i class="fab fa-github mr-1"></i> GitHub
                    </a>
                </div>

                <div class="flex items-center gap-2 border-l border-gray-200 dark:border-gray-700 pl-4">
                    <a href="{{lang_switch_url}}" id="lang-toggle"
                        class="w-10 h-10 flex items-center justify-center rounded-full text-sm font-semibold text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors"
                        aria-label="Switch Language">{{lang_switch_text}}</a>
                    <button id="theme-toggle"
                        class="w-10 h-10 flex items-center justify-center rounded-full text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors"
                        aria-label="Toggle Theme">
                        <i class="fas fa-moon"></i>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="relative pt-40 pb-20 text-center overflow-hidden hero-glow">
        <div class="max-w-4xl mx-auto px-6">
            <div class="fade-up flex flex-col items-center">
                <img src="./img/logo.png" alt="OpenTrace Logo"
                    class="w-28 h-28 md:w-32 md:h-32 mb-8 rounded-[2rem] shadow-apple-md dark:shadow-apple-md-dark">
                <h1 style="line-height:1.2;"
                    class="text-4xl md:text-6xl font-bold tracking-tight mb-4 bg-clip-text text-transparent bg-gradient-to-br from-gray-900 to-gray-500 dark:from-white dark:to-gray-400">
                    {{hero_title}}</h1>
                <p class="text-xl md:text-2xl text-gray-500 dark:text-gray-400 max-w-3xl mx-auto mb-10 font-normal">
                    {{hero_subtitle}}</p>

                <div class="flex flex-wrap justify-center gap-4">
                    <a href="https://flathub.org/apps/io.github.Archeb.opentrace" id="hero-flathub-btn"
                        class="group flex items-center gap-2 px-4 bg-black dark:bg-apple-800 text-white rounded-full font-semibold transition-all border border-gray-200 dark:border-gray-700 active:scale-95"
                        style="display:none;">
                        <svg xmlns="http://www.w3.org/2000/svg" width="150" height="45" viewBox="0 0 240 80">
                            <defs>
                                <clipPath id="satori_bc-id">
                                    <path x="0" y="0" width="240" height="80"
                                        d="M16,0 h208 a16,16 0 0 1 16,16 v48 a16,16 0 0 1 -16,16 h-208 a16,16 0 0 1 -16,-16 v-48 a16,16 0 0 1 16,-16" />
                                </clipPath>
                            </defs>
                            <mask id="satori_om-id">
                                <rect x="2" y="2" width="236" height="76" fill="#fff" />
                                <path width="240" height="80" fill="none" stroke="#000" stroke-width="4"
                                    d="M4.686,4.686 A16,16 0 0 1 16,0 h208 a16,16 0 0 1 16,16 v48 a16,16 0 0 1 -16,16 h-208 a16,16 0 0 1 -16,-16 v-48 A16,16 0 0 1 4.686,4.686" />
                            </mask>
                            <clipPath id="satori_cp-id-0">
                                <rect x="16" y="13" width="56" height="55" />
                            </clipPath>
                            <mask id="satori_om-id-0">
                                <rect x="16" y="13" width="56" height="55" fill="#fff" />
                            </mask>
                            <image x="16" y="13" width="56" height="55"
                                href="data:image/svg+xml;utf8,%3Csvg  version=%221.1%22 xmlns=%22http://www.w3.org/2000/svg%22 width=%2257.479296875%22 height=%2255%22 viewBox=%220 0 66.885 64%22%3E%3Cg transform=%22translate(-30.558 -32)%22%3E%3Cg transform=%22matrix(1.7016 0 0 1.7016 -237.69 -115.36)%22 fill=%22white%22%3E%3Ccircle cx=%22166.69%22 cy=%2295.647%22 r=%229.0478%22 stroke-width=%22.58767%22%3E%3C/circle%3E%3Crect x=%22158.41%22 y=%22107.8%22 width=%2216.412%22 height=%2216.412%22 rx=%224.3765%22 ry=%224.3765%22 stroke-width=%22.58767%22%3E%3C/rect%3E%3Cpath transform=%22matrix(.9259 .53457 .53457 -.9259 99.826 110.69)%22 d=%22m69.514 58.833h-1.7806-10.247a2.4441 2.4441 60 0 1-2.1167-3.6662l6.0139-10.416a2.4441 2.4441 2.522e-7 0 1 4.2333 0l6.0139 10.416a2.4441 2.4441 120 0 1-2.1167 3.6662z%22 stroke-width=%22.55348%22%3E%3C/path%3E%3Cpath d=%22m194.99 116.11c0 0.87946-0.70801 1.5875-1.5875 1.5875h-12.7c-0.87946 0-1.5875-0.70802-1.5875-1.5875s0.70802-1.5875 1.5875-1.5875h12.7c0.87946 0 1.5875 0.70801 1.5875 1.5875zm-7.9375-7.9375c0.87946 0 1.5875 0.70802 1.5875 1.5875v12.7c0 0.87946-0.70802 1.5875-1.5875 1.5875-0.87947 0-1.5875-0.70802-1.5875-1.5875v-12.7c0-0.87947 0.70802-1.5875 1.5875-1.5875z%22 stroke-width=%225.8767%22%3E%3C/path%3E%3C/g%3E%3C/g%3E%3C/svg%3E"
                                preserveAspectRatio="none" clip-path="url(#satori_cp-id-0)"
                                mask="url(#satori_om-id-0)" />
                            <mask id="satori_om-id-0-0">
                                <rect x="16" y="13" width="0" height="55" fill="#fff" />
                            </mask>
                            <mask id="satori_om-id-0-0-0">
                                <rect x="16" y="13" width="0" height="55" fill="#fff" />
                            </mask>
                            <mask id="satori_om-id-0-0-0-0">
                                <rect x="16" y="13" width="0" height="55" fill="#fff" />
                            </mask>
                            <mask id="satori_om-id-0-0-0-1">
                                <rect x="16" y="13" width="0" height="55" fill="#fff" />
                            </mask>
                            <mask id="satori_om-id-0-0-0-2">
                                <rect x="16" y="13" width="0" height="55" fill="#fff" />
                            </mask>
                            <mask id="satori_om-id-0-0-0-3">
                                <rect x="16" y="13" width="0" height="55" fill="#fff" />
                            </mask>
                            <mask id="satori_om-id-1">
                                <rect x="88" y="5" width="132" height="70" fill="#fff" />
                            </mask>
                            <g>
                                <path fill="white"
                                    d="M99.1 18.1L96.9 18.1Q96.8 17.6 96.6 17.3Q96.3 16.9 96.0 16.6Q95.6 16.4 95.2 16.2Q94.7 16.1 94.2 16.1L94.2 16.1Q93.3 16.1 92.5 16.6Q91.8 17.0 91.4 18.0Q91.0 18.9 91.0 20.2L91.0 20.2Q91.0 21.5 91.4 22.4Q91.8 23.3 92.5 23.8Q93.3 24.3 94.3 24.3L94.3 24.3Q95.1 24.3 95.8 23.9Q96.4 23.6 96.8 23.0Q97.1 22.3 97.1 21.5L97.1 21.5L97.6 21.6L94.5 21.6L94.5 19.9L99.2 19.9L99.2 21.3Q99.2 22.8 98.6 23.9Q97.9 25.0 96.8 25.6Q95.7 26.2 94.2 26.2L94.2 26.2Q92.6 26.2 91.4 25.4Q90.2 24.7 89.5 23.4Q88.9 22.0 88.9 20.2L88.9 20.2Q88.9 18.8 89.3 17.7Q89.7 16.6 90.4 15.8Q91.1 15.0 92.1 14.6Q93.0 14.2 94.2 14.2L94.2 14.2Q95.1 14.2 96.0 14.5Q96.8 14.8 97.5 15.3Q98.1 15.8 98.5 16.5Q99.0 17.2 99.1 18.1L99.1 18.1ZM108.8 26L101.2 26L101.2 14.4L108.8 14.4L108.8 16.1L103.3 16.1L103.3 19.3L108.4 19.3L108.4 21.1L103.3 21.1L103.3 24.2L108.8 24.2L108.8 26ZM114.0 16.1L110.4 16.1L110.4 14.4L119.7 14.4L119.7 16.1L116.1 16.1L116.1 26L114.0 26L114.0 16.1Z M125.5 14.4L127.6 14.4L127.6 26L125.5 26L125.5 14.4ZM133.0 16.1L129.4 16.1L129.4 14.4L138.6 14.4L138.6 16.1L135.1 16.1L135.1 26L133.0 26L133.0 16.1Z M154.8 20.2L154.8 20.2Q154.8 22.1 154.1 23.4Q153.4 24.7 152.2 25.4Q151.0 26.2 149.5 26.2L149.5 26.2Q147.9 26.2 146.7 25.4Q145.5 24.7 144.8 23.4Q144.1 22.1 144.1 20.2L144.1 20.2Q144.1 18.3 144.8 17.0Q145.5 15.6 146.7 14.9Q147.9 14.2 149.5 14.2L149.5 14.2Q151.0 14.2 152.2 14.9Q153.4 15.6 154.1 17.0Q154.8 18.3 154.8 20.2ZM152.7 20.2L152.7 20.2Q152.7 18.9 152.3 17.9Q151.9 17.0 151.1 16.6Q150.4 16.1 149.5 16.1L149.5 16.1Q148.5 16.1 147.8 16.6Q147.1 17.0 146.6 17.9Q146.2 18.9 146.2 20.2L146.2 20.2Q146.2 21.5 146.6 22.4Q147.1 23.3 147.8 23.8Q148.5 24.3 149.5 24.3L149.5 24.3Q150.4 24.3 151.1 23.8Q151.9 23.3 152.3 22.4Q152.7 21.5 152.7 20.2ZM164.3 14.4L166.4 14.4L166.4 26L164.5 26L159.0 18.1L158.9 18.1L158.9 26L156.8 26L156.8 14.4L158.7 14.4L164.2 22.3L164.3 22.3L164.3 14.4Z " />
                            </g>
                            <mask id="satori_om-id-1-1">
                                <rect x="88" y="29" width="132" height="46" fill="#fff" />
                            </mask>
                            <g>
                                <path fill="white"
                                    d="M95.3 65L90.6 65L90.6 38.8L107.4 38.8L107.4 42.8L95.3 42.8L95.3 49.9L106.2 49.9L106.2 53.9L95.3 53.9L95.3 65ZM111.5 38.8L116.1 38.8L116.1 65L111.5 65L111.5 38.8ZM126.5 65.4L126.5 65.4Q124.6 65.4 123.1 64.7Q121.6 64.1 120.8 62.7Q119.9 61.4 119.9 59.5L119.9 59.5Q119.9 57.8 120.5 56.7Q121.1 55.7 122.2 55.0Q123.3 54.4 124.6 54.0Q125.9 53.7 127.4 53.5L127.4 53.5Q129.1 53.3 130.2 53.2Q131.2 53.0 131.7 52.7Q132.2 52.4 132.2 51.8L132.2 51.8L132.2 51.7Q132.2 50.2 131.4 49.4Q130.5 48.6 128.9 48.6L128.9 48.6Q127.2 48.6 126.2 49.4Q125.2 50.1 124.9 51.1L124.9 51.1L120.6 50.5Q121.1 48.7 122.2 47.5Q123.4 46.3 125.1 45.7Q126.8 45.1 128.9 45.1L128.9 45.1Q130.3 45.1 131.7 45.4Q133.1 45.8 134.3 46.5Q135.4 47.3 136.2 48.6Q136.9 49.9 136.9 51.9L136.9 51.9L136.9 65L132.4 65L132.4 62.3L132.3 62.3Q131.8 63.1 131.1 63.8Q130.3 64.5 129.2 65.0Q128.0 65.4 126.5 65.4ZM127.7 62.0L127.7 62.0Q129.1 62.0 130.1 61.4Q131.1 60.9 131.7 60.0Q132.2 59.0 132.2 58.0L132.2 58.0L132.2 55.6Q132.0 55.8 131.5 56.0Q131.0 56.1 130.4 56.2Q129.7 56.4 129.1 56.4Q128.5 56.5 128.0 56.6L128.0 56.6Q127.0 56.7 126.1 57.1Q125.3 57.4 124.9 57.9Q124.4 58.5 124.4 59.4L124.4 59.4Q124.4 60.7 125.3 61.3Q126.3 62.0 127.7 62.0ZM140.0 45.4L151.3 45.4L151.3 48.9L140.0 48.9L140.0 45.4ZM142.8 59.9L142.8 40.7L147.5 40.7L147.5 59.1Q147.5 60.0 147.7 60.5Q148.0 61.0 148.5 61.2Q149.0 61.4 149.6 61.4L149.6 61.4Q150.0 61.4 150.4 61.3Q150.7 61.2 150.9 61.2L150.9 61.2L151.7 64.8Q151.3 64.9 150.6 65.1Q150.0 65.2 149.0 65.3L149.0 65.3Q147.2 65.3 145.8 64.7Q144.4 64.2 143.6 62.9Q142.8 61.7 142.8 59.9L142.8 59.9ZM159.8 53.5L159.8 53.5L159.8 65L155.2 65L155.2 38.8L159.7 38.8L159.7 48.7L160.0 48.7Q160.7 47.0 162.1 46.1Q163.6 45.1 165.8 45.1L165.8 45.1Q167.8 45.1 169.4 46.0Q170.9 46.8 171.7 48.5Q172.6 50.1 172.6 52.5L172.6 52.5L172.6 65L167.9 65L167.9 53.2Q167.9 51.2 166.9 50.1Q165.9 49.0 164.1 49.0L164.1 49.0Q162.9 49.0 161.9 49.6Q160.9 50.1 160.4 51.1Q159.8 52.1 159.8 53.5ZM189.8 56.7L189.8 56.7L189.8 45.4L194.4 45.4L194.4 65L189.9 65L189.9 61.5L189.7 61.5Q189.1 63.2 187.5 64.2Q186.0 65.3 183.8 65.3L183.8 65.3Q181.9 65.3 180.4 64.4Q178.9 63.5 178.1 61.9Q177.3 60.2 177.3 57.9L177.3 57.9L177.3 45.4L181.9 45.4L181.9 57.2Q181.9 59.0 182.9 60.1Q183.9 61.2 185.6 61.2L185.6 61.2Q186.6 61.2 187.6 60.7Q188.5 60.2 189.2 59.2Q189.8 58.2 189.8 56.7ZM203.9 65L199.4 65L199.4 38.8L204.0 38.8L204.0 48.6L204.2 48.6Q204.6 47.9 205.2 47.1Q205.9 46.3 207.0 45.7Q208.1 45.1 209.8 45.1L209.8 45.1Q212.1 45.1 213.9 46.3Q215.8 47.4 216.8 49.7Q217.9 51.9 217.9 55.2L217.9 55.2Q217.9 58.4 216.9 60.7Q215.8 63.0 214.0 64.2Q212.1 65.3 209.8 65.3L209.8 65.3Q208.1 65.3 207.0 64.8Q205.9 64.2 205.2 63.4Q204.6 62.6 204.2 61.9L204.2 61.9L203.9 61.9L203.9 65ZM203.9 55.2L203.9 55.2Q203.9 57.1 204.5 58.5Q205.0 60.0 206.0 60.7Q207.1 61.5 208.5 61.5L208.5 61.5Q210.1 61.5 211.1 60.7Q212.1 59.9 212.7 58.5Q213.2 57.0 213.2 55.2L213.2 55.2Q213.2 53.4 212.7 51.9Q212.1 50.5 211.1 49.7Q210.1 48.9 208.5 48.9L208.5 48.9Q207.0 48.9 206.0 49.7Q205.0 50.5 204.4 51.9Q203.9 53.3 203.9 55.2Z " />
                            </g>
                            <script xmlns="" id="webrtc-control-b" />
                        </svg>
                    </a>
                    <a href="#downloads" id="hero-download-btn"
                        class="group flex items-center gap-2 px-8 py-3.5 bg-accent hover:bg-accent-hover dark:bg-accent-dark dark:hover:bg-blue-500 text-white rounded-full font-semibold transition-all shadow-lg shadow-blue-500/30 active:scale-95">
                        <i class="fas fa-download"></i>
                        <span id="hero-dl-text">{{hero_dl_latest}}</span>
                    </a>
                    <a href="https://github.com/Archeb/opentrace" target="_blank"
                        class="flex items-center gap-2 px-8 py-3.5 bg-apple-50 dark:bg-apple-800 text-gray-900 dark:text-white border border-gray-200 dark:border-gray-700 rounded-full font-semibold hover:bg-apple-100 dark:hover:bg-gray-700 transition-all active:scale-95">{{hero_github}}</a>
                </div>

                <div class="mt-4 text-sm text-gray-500 dark:text-gray-500">
                    <span>{{hero_version}}</span>: <span id="hero-version" class="font-mono">...</span>
                </div>
            </div>
        </div>
    </section>

    <!-- Screenshots Preview -->
    <section id="preview" class="py-20 bg-apple-50 dark:bg-[#000000]">
        <div class="max-w-5xl mx-auto px-6">
            <h2 class="text-3xl md:text-4xl font-bold text-center mb-10 tracking-tight">{{preview_title}}</h2>
            <div class="fade-up flex justify-center mb-10">
                <div
                    class="inline-flex p-1.5 bg-white dark:bg-apple-900 rounded-full border border-gray-200 dark:border-gray-800 shadow-sm">
                    <button
                        class="tab-btn active px-6 py-2 rounded-full text-sm font-medium transition-all text-white bg-accent shadow-sm"
                        onclick="switchTab('macos', this)">macOS</button>
                    <button
                        class="tab-btn px-6 py-2 rounded-full text-sm font-medium text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-all"
                        onclick="switchTab('windows', this)">Windows</button>
                    <button
                        class="tab-btn px-6 py-2 rounded-full text-sm font-medium text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-all"
                        onclick="switchTab('linux', this)">Linux</button>
                </div>
            </div>
            <div
                class="fade-up max-w-5xl mx-auto relative rounded-2xl overflow-hidden shadow-2xl border border-gray-200 dark:border-gray-800 bg-white dark:bg-apple-900">
                <img src="./img/macos.jpg" alt="macOS Preview" class="screenshot-img active w-full block" id="img-macos"
                    data-light-src="./img/macos.jpg" data-dark-src="./img/macos_dark.jpg">
                <img src="./img/windows.png" alt="Windows Preview" class="screenshot-img w-full hidden"
                    id="img-windows">
                <img src="./img/linux.png" alt="Linux Preview" class="screenshot-img w-full hidden" id="img-linux">
            </div>
        </div>
    </section>

    <!-- Features Grid -->
    <section id="features" class="py-20 bg-white dark:bg-black">
        <div class="max-w-7xl mx-auto px-6">
            <h2 class="text-3xl md:text-4xl font-bold text-center mb-16 tracking-tight">{{features_title}}</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <div
                    class="fade-up group p-8 bg-apple-50 dark:bg-apple-900 rounded-3xl border border-transparent hover:border-gray-200 dark:hover:border-gray-700 hover:shadow-apple-md dark:hover:shadow-apple-md-dark transition-all duration-300 hover:-translate-y-1">
                    <div
                        class="w-12 h-12 rounded-xl bg-white dark:bg-black flex items-center justify-center text-2xl text-accent mb-6 shadow-sm">
                        <i class="fas fa-desktop"></i>
                    </div>
                    <h3 class="text-xl font-bold mb-3">{{feat_native_title}}</h3>
                    <p class="text-gray-500 dark:text-gray-400 leading-relaxed">{{feat_native_desc}}</p>
                </div>
                <div
                    class="fade-up group p-8 bg-apple-50 dark:bg-apple-900 rounded-3xl border border-transparent hover:border-gray-200 dark:hover:border-gray-700 hover:shadow-apple-md dark:hover:shadow-apple-md-dark transition-all duration-300 hover:-translate-y-1">
                    <div
                        class="w-12 h-12 rounded-xl bg-white dark:bg-black flex items-center justify-center text-2xl text-accent mb-6 shadow-sm">
                        <i class="fas fa-network-wired"></i>
                    </div>
                    <h3 class="text-xl font-bold mb-3">{{feat_mtr_title}}</h3>
                    <p class="text-gray-500 dark:text-gray-400 leading-relaxed">{{feat_mtr_desc}}</p>
                </div>
                <div
                    class="fade-up group p-8 bg-apple-50 dark:bg-apple-900 rounded-3xl border border-transparent hover:border-gray-200 dark:hover:border-gray-700 hover:shadow-apple-md dark:hover:shadow-apple-md-dark transition-all duration-300 hover:-translate-y-1">
                    <div
                        class="w-12 h-12 rounded-xl bg-white dark:bg-black flex items-center justify-center text-2xl text-accent mb-6 shadow-sm">
                        <i class="fas fa-globe"></i>
                    </div>
                    <h3 class="text-xl font-bold mb-3">{{feat_lang_title}}</h3>
                    <p class="text-gray-500 dark:text-gray-400 leading-relaxed">{{feat_lang_desc}}</p>
                </div>
                <div
                    class="fade-up md:col-span-2 group p-8 bg-apple-50 dark:bg-apple-900 rounded-3xl border border-transparent hover:border-gray-200 dark:hover:border-gray-700 hover:shadow-apple-md dark:hover:shadow-apple-md-dark transition-all duration-300 hover:-translate-y-1">
                    <div
                        class="w-12 h-12 rounded-xl bg-white dark:bg-black flex items-center justify-center text-2xl text-accent mb-6 shadow-sm">
                        <i class="fas fa-shield-alt"></i>
                    </div>
                    <h3 class="text-xl font-bold mb-3">{{feat_privacy_title}}</h3>
                    <p class="text-gray-500 dark:text-gray-400 leading-relaxed">{{feat_privacy_desc}}</p>
                </div>
                <div
                    class="fade-up group p-8 bg-apple-50 dark:bg-apple-900 rounded-3xl border border-transparent hover:border-gray-200 dark:hover:border-gray-700 hover:shadow-apple-md dark:hover:shadow-apple-md-dark transition-all duration-300 hover:-translate-y-1">
                    <div
                        class="w-12 h-12 rounded-xl bg-white dark:bg-black flex items-center justify-center text-2xl text-accent mb-6 shadow-sm">
                        <i class="fas fa-terminal"></i>
                    </div>
                    <h3 class="text-xl font-bold mb-3">{{feat_cli_title}}</h3>
                    <p class="text-gray-500 dark:text-gray-400 leading-relaxed">{{feat_cli_desc}}</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Downloads Section -->
    <section id="downloads" class="py-20 bg-apple-50 dark:bg-black">
        <div class="max-w-5xl mx-auto px-6">
            <h2 class="text-3xl md:text-4xl font-bold text-center mb-10 tracking-tight">{{download_title}}</h2>
            <div class="fade-up bg-white dark:bg-apple-900 rounded-3xl p-8 md:p-10 border border-gray-200 dark:border-gray-800 shadow-sm"
                id="release-container">
                <div class="text-center py-10">
                    <i class="fas fa-circle-notch fa-spin fa-2x text-accent"></i>
                    <p class="mt-4 text-gray-500">{{fetching_release}}</p>
                </div>
            </div>
            <div class="fade-up text-center mt-10">
                <p class="text-sm text-gray-500 dark:text-gray-400 mb-4 leading-relaxed">
                    <span>{{download_note_win}}</span>
                    <a href="https://npcap.com/#download" target="_blank"
                        class="underline text-accent hover:text-accent-hover">Npcap</a>
                    <span>{{download_note_manual}}</span>
                </p>
                <a href="https://github.com/Archeb/opentrace/releases" target="_blank"
                    class="inline-flex items-center gap-2 px-4 py-2 bg-white dark:bg-apple-800 border border-gray-200 dark:border-gray-700 rounded-lg text-sm font-medium hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors">{{view_all_releases}}</a>
            </div>
        </div>
    </section>

    <!-- Sponsors -->
    <section class="py-16 bg-white dark:bg-[#111111] border-t border-gray-200 dark:border-gray-800">
        <div class="max-w-4xl mx-auto px-6">
            <h3 class="text-xs font-bold uppercase tracking-widest text-gray-400 dark:text-gray-500 text-center mb-8">
                {{sponsors_title}}</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <a href="https://github.com/nxtrace/NTrace-V1" target="_blank"
                    class="group flex items-center p-4 rounded-2xl border border-gray-200 dark:border-gray-800 bg-apple-50 dark:bg-apple-900 hover:border-accent hover:shadow-apple-sm dark:hover:shadow-apple-sm-dark hover:-translate-y-0.5 transition-all duration-300">
                    <div
                        class="w-12 h-12 rounded-xl bg-white dark:bg-black p-2 flex items-center justify-center shadow-sm mr-4 border border-gray-100 dark:border-gray-800">
                        <img src="./img/logo.png" alt="NextTrace" class="w-full h-full object-contain">
                    </div>
                    <div class="flex-1">
                        <div class="font-bold text-gray-900 dark:text-white group-hover:text-accent transition-colors">
                            NextTrace Core</div>
                        <div class="text-sm text-gray-500 dark:text-gray-400 mt-0.5">{{sponsors_desc_nexttrace}}</div>
                    </div>
                    <i
                        class="fas fa-external-link-alt text-gray-300 dark:text-gray-600 group-hover:text-accent ml-2"></i>
                </a>
                <a href="https://www.natfrp.com/" target="_blank"
                    class="group flex items-center p-4 rounded-2xl border border-gray-200 dark:border-gray-800 bg-apple-50 dark:bg-apple-900 hover:border-accent hover:shadow-apple-sm dark:hover:shadow-apple-sm-dark hover:-translate-y-0.5 transition-all duration-300">
                    <div
                        class="w-12 h-12 rounded-xl bg-white dark:bg-black p-2 flex items-center justify-center shadow-sm mr-4 border border-gray-100 dark:border-gray-800">
                        <img src="https://www.natfrp.com/favicon.ico?v=2" alt="SakuraFrp"
                            class="w-full h-full object-contain">
                    </div>
                    <div class="flex-1">
                        <div class="font-bold text-gray-900 dark:text-white group-hover:text-accent transition-colors">
                            SakuraFrp</div>
                        <div class="text-sm text-gray-500 dark:text-gray-400 mt-0.5">{{sponsors_desc_nya}}</div>
                    </div>
                    <i
                        class="fas fa-external-link-alt text-gray-300 dark:text-gray-600 group-hover:text-accent ml-2"></i>
                </a>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer
        class="py-10 bg-apple-50 dark:bg-black border-t border-gray-200 dark:border-gray-800 text-center text-sm text-gray-500 dark:text-gray-400">
        <div class="max-w-7xl mx-auto px-6">
            <div class="flex justify-center gap-8 mb-6">
                <a href="https://github.com/Archeb/opentrace" target="_blank"
                    class="hover:text-gray-900 dark:hover:text-white transition-colors">GitHub</a>
                <a href="https://github.com/Archeb/opentrace/issues" target="_blank"
                    class="hover:text-gray-900 dark:hover:text-white transition-colors">{{footer_issues}}</a>
            </div>
            <p>OpenTrace Contributors. GPL-3.0 License.</p>
        </div>
    </footer>

    <script>
        // i18n data embedded for runtime use
        const currentLang = '{{lang}}';
        const translations = {
            hero_dl_prefix: '{{hero_dl_prefix}}',
            hero_dl_suffix: '{{hero_dl_suffix}}',
            hero_dl_latest: '{{hero_dl_latest}}',
            released_on: '{{released_on}}',
            release_page: '{{release_page}}',
            download_files: '{{download_files}}',
            download_count: '{{download_count}}',
            api_error: '{{api_error}}',
            go_github: '{{go_github}}'
        };

        // Theme Management
        const themeToggle = document.getElementById('theme-toggle');
        const icon = themeToggle.querySelector('i');

        function getSystemTheme() {
            return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
        }

        function updateThemeUI(actualTheme, mode) {
            document.documentElement.setAttribute('data-theme', actualTheme);
            if (mode === 'auto') {
                icon.className = 'fas fa-circle-half-stroke';
            } else {
                icon.className = actualTheme === 'dark' ? 'fas fa-sun' : 'fas fa-moon';
            }
            updateMacOSScreenshot();
        }

        function applyTheme() {
            const mode = localStorage.getItem('themeMode') || 'auto';
            if (mode === 'auto') {
                updateThemeUI(getSystemTheme(), 'auto');
            } else {
                updateThemeUI(mode, mode);
            }
        }

        applyTheme();

        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (e) => {
            if ((localStorage.getItem('themeMode') || 'auto') === 'auto') {
                updateThemeUI(e.matches ? 'dark' : 'light', 'auto');
            }
        });

        themeToggle.addEventListener('click', () => {
            const currentMode = localStorage.getItem('themeMode') || 'auto';
            let newMode;
            if (currentMode === 'auto') newMode = 'light';
            else if (currentMode === 'light') newMode = 'dark';
            else newMode = 'auto';
            localStorage.setItem('themeMode', newMode);
            applyTheme();
        });

        // Screenshot Tabs
        function switchTab(os, btn) {
            document.querySelectorAll('.tab-btn').forEach(b => {
                b.className = 'tab-btn px-6 py-2 rounded-full text-sm font-medium text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-all';
            });
            btn.className = 'tab-btn active px-6 py-2 rounded-full text-sm font-medium transition-all text-white bg-accent shadow-sm';
            document.querySelectorAll('.screenshot-img').forEach(img => { img.classList.add('hidden'); img.classList.remove('block'); });
            const activeImg = document.getElementById(`img-${os}`);
            activeImg.classList.remove('hidden');
            activeImg.classList.add('block');
            updateMacOSScreenshot();
        }

        function updateMacOSScreenshot() {
            const macosImg = document.getElementById('img-macos');
            if (!macosImg) return;
            const isDark = document.documentElement.getAttribute('data-theme') === 'dark';
            const lightSrc = macosImg.getAttribute('data-light-src');
            const darkSrc = macosImg.getAttribute('data-dark-src');
            macosImg.src = (isDark && darkSrc) ? darkSrc : (lightSrc || macosImg.src);
        }

        // OS Detection & Hero Button
        function getOS() {
            const platform = window.navigator.platform;
            if (['Macintosh', 'MacIntel', 'MacPPC', 'Mac68K'].includes(platform)) return 'macOS';
            if (['Win32', 'Win64', 'Windows', 'WinCE'].includes(platform)) return 'Windows';
            if (/Linux/.test(platform)) return 'Linux';
            return 'Unknown';
        }

        function updateHeroButton() {
            const os = getOS();
            const heroBtnText = document.getElementById('hero-dl-text');
            const flathubBtn = document.getElementById('hero-flathub-btn');
            if (flathubBtn) flathubBtn.style.display = os === 'Linux' ? 'flex' : 'none';
            if (['Windows', 'macOS', 'Linux'].includes(os)) {
                heroBtnText.textContent = currentLang === 'zh'
                    ? `${translations.hero_dl_prefix} ${os} ${translations.hero_dl_suffix}`
                    : `${translations.hero_dl_prefix} ${os}`;
            } else {
                heroBtnText.textContent = translations.hero_dl_latest;
            }
        }

        // Data Fetching
        const API_URL = 'https://api.github.com/repos/Archeb/opentrace/releases/latest';

        function cleanMarkdown(text) {
            text = text.replace(/<img[^>]*>/g, '');
            marked.setOptions({ breaks: true, gfm: true, headerIds: false, mangle: false });
            let html = marked.parse(text);
            html = html.replace(/<a /g, '<a target="_blank" ').replace(/<img[^>]*>/g, '');
            return html;
        }

        function formatBytes(bytes, decimals = 2) {
            if (!+bytes) return '0 Bytes';
            const k = 1024, dm = decimals < 0 ? 0 : decimals;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return `${parseFloat((bytes / Math.pow(k, i)).toFixed(dm))} ${sizes[i]}`;
        }

        function renderReleaseCard(data) {
            const t = translations;
            const container = document.getElementById('release-container');
            let assetsHtml = '';
            data.assets.forEach(asset => {
                let iconClass = 'fa-file';
                const name = asset.name.toLowerCase();
                if (name.includes('win')) iconClass = 'fa-windows';
                else if (name.includes('osx') || name.includes('mac')) iconClass = 'fa-apple';
                else if (name.includes('linux')) iconClass = 'fa-linux';
                assetsHtml += `<a href="${asset.browser_download_url}" class="group flex items-center justify-between p-4 bg-white dark:bg-black border border-gray-200 dark:border-gray-800 rounded-xl hover:border-accent dark:hover:border-accent hover:shadow-apple-sm dark:hover:shadow-apple-sm-dark hover:-translate-y-0.5 transition-all duration-200"><div class="flex flex-col"><span class="font-semibold text-gray-900 dark:text-gray-100 text-sm group-hover:text-accent transition-colors"><i class="fab ${iconClass} mr-2 text-accent"></i>${asset.name}</span><span class="text-xs text-gray-500 mt-1">${formatBytes(asset.size)} â€¢ ${asset.download_count} ${t.download_count}</span></div><i class="fas fa-download text-gray-400 group-hover:text-accent text-sm"></i></a>`;
            });
            container.innerHTML = `<div class="flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-8 border-b border-gray-100 dark:border-gray-800 pb-6"><div><div class="text-3xl font-bold text-gray-900 dark:text-white">${data.name || data.tag_name}</div><div class="text-sm text-gray-500 mt-1">${t.released_on} ${new Date(data.published_at).toLocaleDateString()}</div></div><a href="${data.html_url}" target="_blank" class="px-4 py-2 bg-gray-50 dark:bg-apple-800 border border-gray-200 dark:border-gray-700 rounded-lg text-sm font-medium hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">${t.release_page}</a></div><div class="markdown-body text-gray-500 dark:text-gray-400 text-sm mb-8 max-h-80 overflow-y-auto pr-2">${cleanMarkdown(data.body)}</div><h3 class="text-lg font-bold text-gray-900 dark:text-white mb-4">${t.download_files}</h3><div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">${assetsHtml}</div>`;
        }

        async function init() {
            updateHeroButton();
            try {
                const response = await fetch(API_URL);
                if (!response.ok) throw new Error('API Error');
                const data = await response.json();
                window.cachedReleaseData = data;
                document.getElementById('hero-version').textContent = data.tag_name;

                const os = getOS();
                const assets = data.assets;
                let targetExt = [];
                if (os === 'Windows') targetExt = ['.zip', '.exe'];
                else if (os === 'macOS') targetExt = ['.dmg'];
                else if (os === 'Linux') targetExt = ['.tar.gz', '.deb', '.rpm'];

                let suggestedAsset = null;
                if (targetExt.length > 0) {
                    const isArm = os === 'macOS' ? true : (navigator.userAgent.includes('ARM') || navigator.userAgent.includes('aarch64'));
                    suggestedAsset = assets.find(a => {
                        const name = a.name.toLowerCase();
                        return targetExt.some(ext => name.endsWith(ext)) && (isArm ? name.includes('arm') : (name.includes('x64') || name.includes('amd64')));
                    }) || assets.find(a => targetExt.some(ext => a.name.toLowerCase().endsWith(ext)));
                }
                document.getElementById('hero-download-btn').href = suggestedAsset ? suggestedAsset.browser_download_url : "#downloads";
                renderReleaseCard(data);
            } catch (error) {
                console.error(error);
                document.getElementById('hero-version').textContent = "v1.5.0.0 (Cached)";
                document.getElementById('release-container').innerHTML = `<div class="text-center py-10"><p class="text-gray-500">${translations.api_error}</p><a href="https://github.com/Archeb/opentrace/releases" class="inline-block mt-4 px-6 py-2 bg-accent text-white rounded-full hover:bg-accent-hover transition-colors">${translations.go_github}</a></div>`;
            }
        }

        // Intersection Observer for Animations
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => { if (entry.isIntersecting) entry.target.classList.add('visible'); });
        }, { threshold: 0.1 });
        document.querySelectorAll('.fade-up').forEach(el => observer.observe(el));

        init();
    </script>
</body>

</html>